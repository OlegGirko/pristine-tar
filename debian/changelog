pristine-tar (0.20) UNRELEASED; urgency=low

  * Avoid littering .orig.tar.gz.tmp files around by building intermediate
    tarball in the temp dir. Closes: #508965

 -- Joey Hess <joeyh@debian.org>  Mon, 29 Dec 2008 15:32:34 -0500

pristine-tar (0.19) unstable; urgency=low

  [ Josh Triplett ]
  * Add a .gitignore file
  * Various cleanups to zgz.
  * Remove the unnecessary -l, -S, -t, and -v flags from zgz.
  * Allow the empty string as an original filename in zgz, rather than
    treating the empty string as a flag to not store an original filename.
  * Fix zgz's usage message to stop identifying the program as gzip.
  * Add a new -T,--timestamp flag to zgz, to explicitly set the timestamp
    stored in the gzip file, rather than taking the timestamp of the input
    file. Closes: #507110

  [ Joey Hess ]
  * zgz: Avoid using uninitialized data as timestamp in -c mode.
    Closes: #507095
  * Document existing long options. Closes: #499488
  * Avoid exposing tar file names to the shell. Closes: #500499
  * Clarify bit in man page about what file formats are supported.
    Closes: #507322

  [ Josh Triplett ]
  * zgz: Incorporate a cut-down version of GNU gzip to support the --gnu
    option.  The cut-down gzip includes support for explicitly setting the
    timestamp and original filename. Closes: #506627
  * pristine-gz: Now that zgz supports explicitly setting the timestamp and
    original filename with both --zlib and --gnu, use that support to do all
    compression using -c with standard input and standard output.  This
    removes the need to create a temporary file with the original filename and
    set its timestamp, as well as the need to continuously recreate the file
    when compressed and removed. Closes: #506627
  * zgz: Remove support for files, making -c the default.  This removes a lot
    of complexity and code duplication.

 -- Joey Hess <joeyh@debian.org>  Fri, 12 Dec 2008 16:12:27 -0500

pristine-tar (0.18) unstable; urgency=low

  * pristine-gz: Avoid uncompressing the original file more than once.
    Closes: #506490 

 -- Joey Hess <joeyh@debian.org>  Sat, 22 Nov 2008 18:22:40 -0500

pristine-tar (0.17) unstable; urgency=low

  * Correct -f order to come after --gnu.

 -- Joey Hess <joeyh@debian.org>  Fri, 04 Jul 2008 14:46:30 -0400

pristine-tar (0.16) unstable; urgency=low

  * pristine-gz: Always pass -f to zgz, to support cases where
    the gzip header claims that the original input file had an extension
    that suggests it was itself already compressed. (Although it can't really
    be.) Not doing the same for gzip because -f doesn't cause it to ignore
    extensions. See #475778

 -- Joey Hess <joeyh@debian.org>  Fri, 04 Jul 2008 14:29:54 -0400

pristine-tar (0.15) unstable; urgency=low

  * Fix POD issues. Closes: #484165
  * zgz: Remove support for a GZIP env variable. We don't need this in
    pristine-tar, and if could screw things up if a user set it.
    Closes: #488986

 -- Joey Hess <joeyh@debian.org>  Wed, 02 Jul 2008 12:46:41 -0400

pristine-tar (0.14) unstable; urgency=low

  * Use debhelper v7; rules file minimisation.
  * Add build and install targets to Makefile.
  * Put in a workaround for bug #479317, an incompatability in perl 5.10
    that causes nonzero exit if a program exits while chdired into a
    subdirectory of a File::Temp temp directory.

 -- Joey Hess <joeyh@debian.org>  Sun, 04 May 2008 14:47:06 -0400

pristine-tar (0.13) unstable; urgency=low

  * Man page typo fix. Closes: #475698

 -- Joey Hess <joeyh@debian.org>  Sat, 19 Apr 2008 16:51:09 -0400

pristine-tar (0.12) unstable; urgency=low

  * pristine-tar: Fix some bugs when run on an uncompressed tarball.

 -- Joey Hess <joeyh@debian.org>  Wed, 02 Apr 2008 13:14:45 -0400

pristine-tar (0.11) unstable; urgency=low

  * Unset $keep, don't keep temp dirs. Oops.

 -- Joey Hess <joeyh@debian.org>  Fri, 21 Mar 2008 14:50:21 -0400

pristine-tar (0.10) unstable; urgency=low

  * pristine-tar: Add -m option to specify a commit message. Closes: #465231

 -- Joey Hess <joeyh@debian.org>  Mon, 10 Mar 2008 15:56:05 -0400

pristine-tar (0.9) unstable; urgency=low

  * Add smart branching for commits. (Cyril Brulebois)
  * Prefer to commit to the ref that exactly matches what is specified at the
    command line.
  * Send all debug and verbose prints to stderr, reserving stdout for
    outputting deltas etc.
  * pristine-tar commit was not generating deltas against the specified
    upstream branch, but against the unpacked contents of the source tarball.
    Fix it to use the upstream branch, ensuring that no matter what branch is
    given, the delta that is created can always recreate the source tarball.

 -- Joey Hess <joeyh@debian.org>  Wed, 06 Feb 2008 14:31:29 -0500

pristine-tar (0.8) unstable; urgency=low

  * If a tarball contains files all in one subdirectory, and the source
    tree it's being generated from already has that subdirectory, don't
    try to create the subdir, which would fail. OTOH, if the subdirectory
    isn't there, proceed with creating it as before.
  * Add support for bz2 files (Cyril Brulebois)
  * Recommends bzip2 and pbzip2, which both might be needed when dealing
    with bz2 files due to differences in their output.

 -- Joey Hess <joeyh@debian.org>  Sat, 02 Feb 2008 17:28:17 -0500

pristine-tar (0.7) unstable; urgency=low

  * Improve/fix handling when there is no local pristine-tar branch.
  * Add a newline to the .id files committed to git.

 -- Joey Hess <joeyh@debian.org>  Fri, 01 Feb 2008 22:13:06 -0500

pristine-tar (0.6) unstable; urgency=low

  * Improve search for upstream branch. Default to looking for first
    refs/heads/upstream, and failing that, anything with "upstream" in its
    name. This way if there is a local upstream branch and a remote one, it
    will use the local one. If there's only a remote one, it'll use that.
    Closes: #463566
  * Handle the case where there is no local pristine-tar branch. If there
    is exactly one remote branch, use it for checkout. If more than one or
    none, show a nice error message. (Cyril Brulebois)

 -- Joey Hess <joeyh@debian.org>  Fri, 01 Feb 2008 21:35:37 -0500

pristine-tar (0.5) unstable; urgency=low

  * Moved to git, and added a Vcs-Browser field.
  * pristine-tar can now "commit" deltas for a tarball directly to a git
    branch, and then "checkout" the original tarball again. Git users
    are recommended to use these new subcommands because they're easier,
    store the deltas in a consistent location, and avoid problems with
    recreating things like empty directories that git doesn't track.
    Closes: #463352
  * Thanks to madcoder for help with manipulating git branches without
    touching the working copy.
  * Fix paranoia check in pristine-gz to correctly handle parameters
    that take an option.

 -- Joey Hess <joeyh@debian.org>  Thu, 31 Jan 2008 21:52:45 -0500

pristine-tar (0.4) unstable; urgency=low

  * Allow the delta file to be read or written from stdio.
  * Fix man page synopses formatting.

 -- Joey Hess <joeyh@debian.org>  Sat, 24 Nov 2007 16:45:04 -0500

pristine-tar (0.3) unstable; urgency=low

  * pristine-tar sometimes got confused about tarballs that did not unpack
    all files into a subdir. Fixes sear-media and 30 others.
  * tar was confused by files starting with ./ or / in the manifest, so
    strip it out. Fixes erlang-doc-html and 19 others, including doc-fdc,
    which is the only package to have files in / in its tarball.
  * Some tarballs put files in a subdir, but don't show a "/" after the subdir
    name in a manifest. Stop relying on that. (example: streamtuner)
  
  Current stats: Out of the whole debian archive, pristine-gz fails
  on 132 files, and pristine-tar fails on 0. Success with 98.97% of
  files.

 -- Joey Hess <joeyh@debian.org>  Wed, 03 Oct 2007 00:07:54 -0400

pristine-tar (0.2) unstable; urgency=low

  * Added pristine-gz, thanks to paravoid for making this possible!
  * Added zgz, which is derived from a BSD gzip program that uses libz.
    Modified by paravoid to support many options needed to reproduce gz
    files.
  * Renamed the subcommands extract => gentar , stash => gendelta
  * Quite a lot of testing (ie, on the entire Debian archive) and bugfixes.
  * Put files in the generated tarball mode 0644 pre-delta, this is a much
    more likely file mode than the previous 0000 and thus makes the delta
    smaller.
  * File format version is up to 2.0 due to misc incompatible changes.
  * Fix a bug related to tar's handling of unicode filenames.
  * Work around a strange tar behavior: When run with --mode 644, tar
    preserves the sgid bit on subdirectories.

  Current stats: Out of the whole debian archive, pristine-gz fails
  on 131 files, and pristine-tar fails on 45. Success with 98.63% of
  files.

 -- Joey Hess <joeyh@debian.org>  Tue, 02 Oct 2007 21:51:03 -0400

pristine-tar (0.1) unstable; urgency=low

  * First release.

 -- Joey Hess <joeyh@debian.org>  Sun, 30 Sep 2007 20:06:00 -0400
